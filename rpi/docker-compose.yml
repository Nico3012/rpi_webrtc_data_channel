name: device-controller

services:
  wifi-ap:
    build: ./wifi-ap
    network_mode: host
    privileged: true
    environment:
      - DEVICE=linux-work
    stop_grace_period: 60s # Wait 60 seconds before killing the container. The container performs cleanup actions
    restart: always
  hello-world:
    build: ./hello-world
    ports:
      - 3000:3000/tcp
    restart: always
  controller:
    build: ./controller
    network_mode: host # Port 80 freigeben reicht nicht aus, da webrtc auch Ã¼ber andere ports kommuniziert. Daher host netzwerk nutzen. (Diese option funktioniert unter windows aufgrund der docker linux vm nicht richtig. Unter windows bitte den `controller` nativ mit go starten)
    privileged: true
    environment:
      - VIDEO_MODE=linux-work
      - AUDIO_MODE=linux-work
    restart: always
